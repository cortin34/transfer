function calculate() {
  const resultDiv = document.getElementById('result');

  // Сбрасываем все классы и устанавливаем loading
  resultDiv.className = ''; // Убираем все предыдущие классы
  resultDiv.classList.add('loading'); // Добавляем класс loading

  // Показываем блок и устанавливаем текст
  resultDiv.innerText = 'Расчёт...';
  resultDiv.style.display = 'block';

  const oneWayKm = document.getElementById('oneWayKm').value || 0;
  const waitingHours = document.getElementById('waitingHours').value || 0;
  const tollRoad = parseFloat(document.getElementById('tollRoad').value) || 0;
  const paidNights = parseFloat(document.getElementById('paidNights').value) || 0;
  const idleDays = parseFloat(document.getElementById('idleDays').value) || 0;

  const formData = new FormData();
  formData.append('oneWayKm', oneWayKm);
  formData.append('waitingHours', waitingHours);
  formData.append('tollRoad', tollRoad);
  formData.append('paidNights', paidNights);
  formData.append('idleDays', idleDays);

  fetch(WEB_APP_URL, {
    method: 'POST',
    body: formData,
  })
  .then(response => response.json())
  .then(data => {
    if (data.error) {
      resultDiv.className = 'error';
      resultDiv.innerText = `Ошибка: ${data.error}`;
    } else {
      resultDiv.className = 'success';
      resultDiv.innerText = `Итого: ${data.result} руб.`;
    }
  })
  .catch(error => {
    console.error('Ошибка:', error);
    resultDiv.className = 'error';
    resultDiv.innerText = 'Произошла ошибка при расчёте.';
  });
}
